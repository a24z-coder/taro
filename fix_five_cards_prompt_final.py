#!/usr/bin/env python3
import os
import re

# –§–∞–π–ª—ã –¥–ª—è —Ñ–∏–Ω–∞–ª—å–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏
files = [
    'app_bg.arb',
    'app_mn_MN.arb',
    'app_mk.arb',
    'app_mk_MK.arb',
    'app_ru.arb',
    'app_ky_KG.arb',
    'app_sr.arb',
    'app_ky.arb',
    'app_ru_RU.arb',
    'app_kk.arb',
    'app_mn.arb',
    'app_uk.arb',
    'app_hu_HU.arb',
]

# –ü–µ—Ä–µ–≤–æ–¥—ã –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —è–∑—ã–∫–∞ (—Ç–µ –∂–µ, —á—Ç–æ –∏ —Ä–∞–Ω–µ–µ)
translations = {
    'app_bg.arb': '–¢–∏ —Å–∏ –æ–ø–∏—Ç–µ–Ω —Ç–∞—Ä–æ–ª–æ–≥. –ü–æ—Ç—Ä–µ–±–∏—Ç–µ–ª—è—Ç {userName} –ø–∏—Ç–∞: "{userQuestion}". –û—Ç–≥–æ–≤–æ—Ä–∏ —á—Ä–µ–∑ —Ä–∞–∑–±–æ—Ä "5 –∫–∞—Ä—Ç–∏". –ö–∞—Ä—Ç–∏—Ç–µ —Å–∞ –ø–æ–¥—Ä–µ–¥–µ–Ω–∏ –ø–æ —Ä–µ–¥: –º–∏–Ω–∞–ª–æ - {pastCard}; –Ω–∞—Å—Ç–æ—è—â–µ - {presentCard}; –±—ä–¥–µ—â–µ - {futureCard}; –ø—Ä–∏—á–∏–Ω–∞ - {reasonCard}; –≤—ä–∑–º–æ–∂–µ–Ω –∏–∑—Ö–æ–¥ - {outcomeCard}. –û–±—è—Å–Ω–∏ –∑–Ω–∞—á–µ–Ω–∏–µ—Ç–æ –Ω–∞ –≤—Å—è–∫–∞ –∫–∞—Ä—Ç–∞ –∏ —Ç—è—Ö–Ω–æ—Ç–æ –∫–æ–º–±–∏–Ω–∏—Ä–∞–Ω–æ –∑–Ω–∞—á–µ–Ω–∏–µ.',
    'app_mn_MN.arb': '–¢–∞ —Ç—É—Ä—à–ª–∞–≥–∞—Ç–∞–π —Ç–∞—Ä–æ–ª–æ–≥—á –±–∞–π–Ω–∞. –•—ç—Ä—ç–≥–ª—ç–≥—á {userName} –∞—Å—É—É–∂ –±–∞–π–Ω–∞: "{userQuestion}". "5 —Ö”©–∑”©—Ä" —Ç–∞—Ä—Ö–∞–ª—Ç–∞–∞—Ä —Ö–∞—Ä–∏—É–ª–Ω–∞ —É—É. –•”©–∑—Ä“Ø“Ø–¥ –¥–∞—Ä–∞–∞–ª–ª–∞–∞—Ä ”©–≥”©–≥–¥—Å”©–Ω: ”©–Ω–≥”©—Ä—Å”©–Ω - {pastCard}; –æ–¥–æ–æ - {presentCard}; –∏—Ä—ç—ç–¥“Ø–π - {futureCard}; —à–∞–ª—Ç–≥–∞–∞–Ω - {reasonCard}; –±–æ–ª–æ–º–∂–∏—Ç “Ø—Ä –¥“Ø–Ω - {outcomeCard}. –•”©–∑”©—Ä –±“Ø—Ä–∏–π–Ω —É—Ç–≥—ã–≥ —Ç–∞–π–ª–±–∞—Ä–ª–∞–∂, —Ç—ç–¥–≥—ç—ç—Ä–∏–π–Ω –Ω–∏–π–ª—Å—ç–Ω —É—Ç–≥–∞ —è–º–∞—Ä –±–∞–π–≥–∞–∞–≥ —Ç–æ–¥–æ—Ä—Ö–æ–π–ª–Ω–æ —É—É.',
    'app_mk.arb': '–í–∏–µ —Å—Ç–µ –∏—Å–∫—É—Å–µ–Ω —Ç–∞—Ä–æ—Ç —á–∏—Ç–∞—á. –ö–æ—Ä–∏—Å–Ω–∏–∫–æ—Ç {userName} –ø—Ä–∞—à—É–≤–∞: "{userQuestion}". –û–¥–≥–æ–≤–æ—Ä–µ—Ç–µ –ø—Ä–µ–∫—É —Ä–∞—Å–ø–æ—Ä–µ–¥ "5 –∫–∞—Ä—Ç–∏". –ö–∞—Ä—Ç–∏—Ç–µ —Å–µ –¥–∞–¥–µ–Ω–∏ –ø–æ —Ä–µ–¥: –º–∏–Ω–∞—Ç–æ - {pastCard}; —Å–µ–≥–∞—à–Ω–æ—Å—Ç - {presentCard}; –∏–¥–Ω–∏–Ω–∞ - {futureCard}; –ø—Ä–∏—á–∏–Ω–∞ - {reasonCard}; –º–æ–∂–µ–Ω –∏—Å—Ö–æ–¥ - {outcomeCard}. –û–±—ò–∞—Å–Ω–µ—Ç–µ –≥–æ –∑–Ω–∞—á–µ—ö–µ—Ç–æ –Ω–∞ —Å–µ–∫–æ—ò–∞ –∫–∞—Ä—Ç–∞ –∏ –Ω–∏–≤–Ω–æ—Ç–æ –∫–æ–º–±–∏–Ω–∏—Ä–∞–Ω–æ –∑–Ω–∞—á–µ—ö–µ.',
    'app_mk_MK.arb': '–í–∏–µ —Å—Ç–µ –∏—Å–∫—É—Å–µ–Ω —Ç–∞—Ä–æ—Ç —á–∏—Ç–∞—á. –ö–æ—Ä–∏—Å–Ω–∏–∫–æ—Ç {userName} –ø—Ä–∞—à—É–≤–∞: "{userQuestion}". –û–¥–≥–æ–≤–æ—Ä–µ—Ç–µ –ø—Ä–µ–∫—É —Ä–∞—Å–ø–æ—Ä–µ–¥ "5 –∫–∞—Ä—Ç–∏". –ö–∞—Ä—Ç–∏—Ç–µ —Å–µ –¥–∞–¥–µ–Ω–∏ –ø–æ —Ä–µ–¥: –º–∏–Ω–∞—Ç–æ - {pastCard}; —Å–µ–≥–∞—à–Ω–æ—Å—Ç - {presentCard}; –∏–¥–Ω–∏–Ω–∞ - {futureCard}; –ø—Ä–∏—á–∏–Ω–∞ - {reasonCard}; –º–æ–∂–µ–Ω –∏—Å—Ö–æ–¥ - {outcomeCard}. –û–±—ò–∞—Å–Ω–µ—Ç–µ –≥–æ –∑–Ω–∞—á–µ—ö–µ—Ç–æ –Ω–∞ —Å–µ–∫–æ—ò–∞ –∫–∞—Ä—Ç–∞ –∏ –Ω–∏–≤–Ω–æ—Ç–æ –∫–æ–º–±–∏–Ω–∏—Ä–∞–Ω–æ –∑–Ω–∞—á–µ—ö–µ.',
    'app_ru.arb': '–¢—ã –æ–ø—ã—Ç–Ω—ã–π —Ç–∞—Ä–æ–ª–æ–≥. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å {userName} —Å–ø—Ä–∞—à–∏–≤–∞–µ—Ç: "{userQuestion}". –û—Ç–≤–µ—Ç—å —á–µ—Ä–µ–∑ —Ä–∞—Å–∫–ª–∞–¥ "5 –∫–∞—Ä—Ç". –ö–∞—Ä—Ç—ã –¥–∞–Ω—ã –ø–æ –ø–æ—Ä—è–¥–∫—É: –ø—Ä–æ—à–ª–æ–µ - {pastCard}; –Ω–∞—Å—Ç–æ—è—â–µ–µ - {presentCard}; –±—É–¥—É—â–µ–µ - {futureCard}; –ø—Ä–∏—á–∏–Ω–∞ - {reasonCard}; –≤–æ–∑–º–æ–∂–Ω—ã–π –∏—Ç–æ–≥ - {outcomeCard}. –û–±—ä—è—Å–Ω–∏ –∑–Ω–∞—á–µ–Ω–∏–µ –∫–∞–∂–¥–æ–π –∫–∞—Ä—Ç—ã –∏ –∏—Ö –æ–±—â–∏–π —Å–º—ã—Å–ª.',
    'app_ky_KG.arb': '–°–∏–∑ —Ç–∞–∂—Ä—ã–π–±–∞–ª—É—É —Ç–∞—Ä–æ –æ–∫—É—É—á—É—Å—É–∑. –ö–æ–ª–¥–æ–Ω—É—É—á—É {userName} —Å—É—Ä–∞–π—Ç: "{userQuestion}". "5 –∫–∞—Ä—Ç–∞" –∂–∞–π—ã–ª—ã—à—ã –∞—Ä–∫—ã–ª—É—É –∂–æ–æ–ø –±–µ—Ä–∏“£–∏–∑. –ö–∞—Ä—Ç–∞–ª–∞—Ä —Ç”©–º”©–Ω–∫“Ø —Ç–∞—Ä—Ç–∏–ø—Ç–µ –±–µ—Ä–∏–ª–≥–µ–Ω: ”©—Ç–∫”©–Ω - {pastCard}; –∞–∑—ã—Ä–∫—ã - {presentCard}; –∫–µ–ª–µ—á–µ–∫ - {futureCard}; —Å–µ–±–µ–ø - {reasonCard}; –º“Ø–º–∫“Ø–Ω –±–æ–ª–≥–æ–Ω –Ω–∞—Ç—ã–π–∂–∞ - {outcomeCard}. –ê—Ä –±–∏—Ä –∫–∞—Ä—Ç–∞–Ω—ã–Ω –º–∞–∞–Ω–∏—Å–∏–Ω —Ç“Ø—à“Ø–Ω–¥“Ø—Ä“Ø–ø, –∞–ª–∞—Ä–¥—ã–Ω –±–∏—Ä–≥–µ–ª–µ—à–∫–µ–Ω –º–∞–∞–Ω–∏—Å–∏–Ω –¥–∞ —Ç“Ø—à“Ø–Ω–¥“Ø—Ä“Ø“£“Ø–∑.',
    'app_sr.arb': '–í–∏ —Å—Ç–µ –∏—Å–∫—É—Å–∞–Ω —á–∏—Ç–∞–ª–∞—Ü —Ç–∞—Ä–æ—Ç–∞. –ö–æ—Ä–∏—Å–Ω–∏–∫ {userName} –ø–∏—Ç–∞: "{userQuestion}". –û–¥–≥–æ–≤–æ—Ä–∏—Ç–µ –ø—Ä–µ–∫–æ —Ä–∞—Å–ø–æ—Ä–µ–¥–∞ "5 –∫–∞—Ä–∞—Ç–∞". –ö–∞—Ä—Ç–µ —Å—É –¥–∞—Ç–µ –ø–æ —Ä–µ–¥—É: –ø—Ä–æ—à–ª–æ—Å—Ç - {pastCard}; —Å–∞–¥–∞—à—ö–æ—Å—Ç - {presentCard}; –±—É–¥—É—õ–Ω–æ—Å—Ç - {futureCard}; —Ä–∞–∑–ª–æ–≥ - {reasonCard}; –º–æ–≥—É—õ–∏ –∏—Å—Ö–æ–¥ - {outcomeCard}. –û–±—ò–∞—Å–Ω–∏—Ç–µ –∑–Ω–∞—á–µ—ö–µ —Å–≤–∞–∫–µ –∫–∞—Ä—Ç–µ –∏ —ö–∏—Ö–æ–≤–æ –∫–æ–º–±–∏–Ω–æ–≤–∞–Ω–æ –∑–Ω–∞—á–µ—ö–µ.',
    'app_ky.arb': '–°–∏–∑ —Ç–∞–∂—Ä—ã–π–±–∞–ª—É—É —Ç–∞—Ä–æ –æ–∫—É—É—á—É—Å—É–∑. –ö–æ–ª–¥–æ–Ω—É—É—á—É {userName} —Å—É—Ä–∞–π—Ç: "{userQuestion}". "5 –∫–∞—Ä—Ç–∞" –∂–∞–π—ã–ª—ã—à—ã –∞—Ä–∫—ã–ª—É—É –∂–æ–æ–ø –±–µ—Ä–∏“£–∏–∑. –ö–∞—Ä—Ç–∞–ª–∞—Ä —Ç”©–º”©–Ω–∫“Ø —Ç–∞—Ä—Ç–∏–ø—Ç–µ –±–µ—Ä–∏–ª–≥–µ–Ω: ”©—Ç–∫”©–Ω - {pastCard}; –∞–∑—ã—Ä–∫—ã - {presentCard}; –∫–µ–ª–µ—á–µ–∫ - {futureCard}; —Å–µ–±–µ–ø - {reasonCard}; –º“Ø–º–∫“Ø–Ω –±–æ–ª–≥–æ–Ω –Ω–∞—Ç—ã–π–∂–∞ - {outcomeCard}. –ê—Ä –±–∏—Ä –∫–∞—Ä—Ç–∞–Ω—ã–Ω –º–∞–∞–Ω–∏—Å–∏–Ω —Ç“Ø—à“Ø–Ω–¥“Ø—Ä“Ø–ø, –∞–ª–∞—Ä–¥—ã–Ω –±–∏—Ä–≥–µ–ª–µ—à–∫–µ–Ω –º–∞–∞–Ω–∏—Å–∏–Ω –¥–∞ —Ç“Ø—à“Ø–Ω–¥“Ø—Ä“Ø“£“Ø–∑.',
    'app_ru_RU.arb': '–¢—ã –æ–ø—ã—Ç–Ω—ã–π —Ç–∞—Ä–æ–ª–æ–≥. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å {userName} —Å–ø—Ä–∞—à–∏–≤–∞–µ—Ç: "{userQuestion}". –û—Ç–≤–µ—Ç—å —á–µ—Ä–µ–∑ —Ä–∞—Å–∫–ª–∞–¥ "5 –∫–∞—Ä—Ç". –ö–∞—Ä—Ç—ã –¥–∞–Ω—ã –ø–æ –ø–æ—Ä—è–¥–∫—É: –ø—Ä–æ—à–ª–æ–µ - {pastCard}; –Ω–∞—Å—Ç–æ—è—â–µ–µ - {presentCard}; –±—É–¥—É—â–µ–µ - {futureCard}; –ø—Ä–∏—á–∏–Ω–∞ - {reasonCard}; –≤–æ–∑–º–æ–∂–Ω—ã–π –∏—Ç–æ–≥ - {outcomeCard}. –û–±—ä—è—Å–Ω–∏ –∑–Ω–∞—á–µ–Ω–∏–µ –∫–∞–∂–¥–æ–π –∫–∞—Ä—Ç—ã –∏ –∏—Ö –æ–±—â–∏–π —Å–º—ã—Å–ª.',
    'app_kk.arb': '–°—ñ–∑ —Ç”ô–∂—ñ—Ä–∏–±–µ–ª—ñ —Ç–∞—Ä–æ –æ“õ—É—à—ã—Å—ã–∑. –ü–∞–π–¥–∞–ª–∞–Ω—É—à—ã {userName} —Å“±—Ä–∞–π–¥—ã: "{userQuestion}". "5 –∫–∞—Ä—Ç–∞" –∂–∞–π—ã–ª—ã–º—ã –∞—Ä“õ—ã–ª—ã –∂–∞—É–∞–ø –±–µ—Ä—ñ“£—ñ–∑. –ö–∞—Ä—Ç–∞–ª–∞—Ä –∫–µ–ª–µ—Å—ñ —Ä–µ—Ç–ø–µ–Ω –±–µ—Ä—ñ–ª–≥–µ–Ω: ”©—Ç–∫–µ–Ω - {pastCard}; “õ–∞–∑—ñ—Ä–≥—ñ - {presentCard}; –±–æ–ª–∞—à–∞“õ - {futureCard}; —Å–µ–±–µ–ø - {reasonCard}; –º“Ø–º–∫—ñ–Ω –Ω”ô—Ç–∏–∂–µ - {outcomeCard}. ”ò—Ä–±—ñ—Ä –∫–∞—Ä—Ç–∞–Ω—ã“£ –º–∞“ì—ã–Ω–∞—Å—ã–Ω —Ç“Ø—Å—ñ–Ω–¥—ñ—Ä—ñ–ø, –æ–ª–∞—Ä–¥—ã“£ –±—ñ—Ä—ñ–∫–∫–µ–Ω –º–∞“ì—ã–Ω–∞—Å—ã–Ω –¥–∞ —Ç“Ø—Å—ñ–Ω–¥—ñ—Ä—ñ“£—ñ–∑.',
    'app_mn.arb': '–¢–∞ —Ç—É—Ä—à–ª–∞–≥–∞—Ç–∞–π —Ç–∞—Ä–æ–ª–æ–≥—á –±–∞–π–Ω–∞. –•—ç—Ä—ç–≥–ª—ç–≥—á {userName} –∞—Å—É—É–∂ –±–∞–π–Ω–∞: "{userQuestion}". "5 —Ö”©–∑”©—Ä" —Ç–∞—Ä—Ö–∞–ª—Ç–∞–∞—Ä —Ö–∞—Ä–∏—É–ª–Ω–∞ —É—É. –•”©–∑—Ä“Ø“Ø–¥ –¥–∞—Ä–∞–∞–ª–ª–∞–∞—Ä ”©–≥”©–≥–¥—Å”©–Ω: ”©–Ω–≥”©—Ä—Å”©–Ω - {pastCard}; –æ–¥–æ–æ - {presentCard}; –∏—Ä—ç—ç–¥“Ø–π - {futureCard}; —à–∞–ª—Ç–≥–∞–∞–Ω - {reasonCard}; –±–æ–ª–æ–º–∂–∏—Ç “Ø—Ä –¥“Ø–Ω - {outcomeCard}. –•”©–∑”©—Ä –±“Ø—Ä–∏–π–Ω —É—Ç–≥—ã–≥ —Ç–∞–π–ª–±–∞—Ä–ª–∞–∂, —Ç—ç–¥–≥—ç—ç—Ä–∏–π–Ω –Ω–∏–π–ª—Å—ç–Ω —É—Ç–≥–∞ —è–º–∞—Ä –±–∞–π–≥–∞–∞–≥ —Ç–æ–¥–æ—Ä—Ö–æ–π–ª–Ω–æ —É—É.',
    'app_uk.arb': '–¢–∏ –¥–æ—Å–≤—ñ–¥—á–µ–Ω–∏–π —Ç–∞—Ä–æ–ª–æ–≥. –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á {userName} –∑–∞–ø–∏—Ç—É—î: "{userQuestion}". –í—ñ–¥–ø–æ–≤—ñ–¥–∞–π —á–µ—Ä–µ–∑ —Ä–æ–∑–∫–ª–∞–¥ "5 –∫–∞—Ä—Ç". –ö–∞—Ä—Ç–∏ –¥–∞–Ω–æ –ø–æ –ø–æ—Ä—è–¥–∫—É: –º–∏–Ω—É–ª–µ - {pastCard}; —Ç–µ–ø–µ—Ä—ñ—à–Ω—î - {presentCard}; –º–∞–π–±—É—Ç–Ω—î - {futureCard}; –ø—Ä–∏—á–∏–Ω–∞ - {reasonCard}; –º–æ–∂–ª–∏–≤–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç - {outcomeCard}. –ü–æ—è—Å–Ω–∏ –∑–Ω–∞—á–µ–Ω–Ω—è –∫–æ–∂–Ω–æ—ó –∫–∞—Ä—Ç–∏ —Ç–∞ —ó—Ö —Å–ø—ñ–ª—å–Ω–∏–π —Å–µ–Ω—Å.',
    'app_hu_HU.arb': '√ñn tapasztalt tarotolvas√≥. A felhaszn√°l√≥ {userName} ezt k√©rdezi: "{userQuestion}". V√°laszoljon az "5 lapos" kirak√°ssal. A lapok sorrendben vannak megadva: m√∫lt - {pastCard}; jelen - {presentCard}; j√∂v≈ë - {futureCard}; ok - {reasonCard}; lehets√©ges kimenetel - {outcomeCard}. Magyar√°zza el minden egyes lap jelent√©s√©t, √©s vil√°g√≠tsa meg azok egy√ºttes jelent√©s√©t.'
}

l10n_dir = 'lib/l10n'

# –†–µ–≥—É–ª—è—Ä–∫–∞ –¥–ª—è –ø–æ–∏—Å–∫–∞ –∫–ª—é—á–∞ (—É—á–∏—Ç—ã–≤–∞–µ—Ç –ª—é–±—ã–µ –∫–∞–≤—ã—á–∫–∏, –ø—Ä–æ–±–µ–ª—ã, –ø–µ—Ä–µ–Ω–æ—Å—ã)
key_re = re.compile(r'(\s*"five_cards_screen_prompt"\s*:\s*)("""|"|\')(.*?)("""|"|\')([,\n])', re.DOTALL)

def fix_file(filename, translation):
    path = os.path.join(l10n_dir, filename)
    if not os.path.exists(path):
        print(f"‚ö†Ô∏è  –§–∞–π–ª {filename} –Ω–µ –Ω–∞–π–¥–µ–Ω, –ø—Ä–æ–ø—É—Å–∫–∞–µ–º")
        return
    with open(path, 'r', encoding='utf-8') as f:
        content = f.read()
    # –ó–∞–º–µ–Ω—è–µ–º —Ç–æ–ª—å–∫–æ –∑–Ω–∞—á–µ–Ω–∏–µ –∫–ª—é—á–∞
    new_content, n = key_re.subn(r'\1"' + translation.replace('"', '\\"') + r'"\5', content)
    if n > 0:
        with open(path, 'w', encoding='utf-8') as f:
            f.write(new_content)
        print(f"‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω {filename}")
    else:
        print(f"‚ÑπÔ∏è  {filename}: –∫–ª—é—á –Ω–µ –Ω–∞–π–¥–µ–Ω –∏–ª–∏ —É–∂–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω")

if __name__ == "__main__":
    print("üîß –§–∏–Ω–∞–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –ø–µ—Ä–µ–≤–æ–¥–æ–≤...")
    for fname in files:
        fix_file(fname, translations[fname])
    print("‚ú® –ì–æ—Ç–æ–≤–æ!") 